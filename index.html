<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pacing – The Art of Audio Timing</title>
<link rel="stylesheet" href="https://unpkg.com/h5p-standalone@1.3.0/dist/styles/h5p.css">
<script src="https://unpkg.com/h5p-standalone@1.3.0/dist/main.bundle.js"></script>
<style>
body { margin: 0; font-family: sans-serif; background: #f5f5f5; }
#h5p-container { width: 100%; height: 90vh; margin: auto; }
#nav { width: 100%; height: 10vh; text-align: center; background: #222; color: #fff; display:flex; align-items:center; justify-content: center; position:relative; }
#nav button { margin: 0 10px; padding: 10px 20px; font-size:16px; cursor:pointer; border-radius:5px; border:none; background:#4CAF50; color:white; transition:0.3s; }
#nav button:hover { background:#45a049; }
#progressBar { position:absolute; bottom:0; left:0; height:5px; background:#4CAF50; transition: width 0.3s; }
.fade { transition: opacity 0.5s ease-in-out; opacity:0; }
.visible { opacity:1; transition: opacity 1s ease-in; }
.audio-btn { display:inline-block; width:24px; height:24px; margin-right:5px; background:#4CAF50; border-radius:50%; animation: pulse 1.5s infinite; cursor:pointer; }
.audio-btn.playing { background:#FF5722; animation:none; }
@keyframes pulse { 0% {transform:scale(1);} 50% {transform:scale(1.3);} 100% {transform:scale(1);} }
</style>
</head>
<body>
<div id="h5p-container" class="fade"></div>
<div id="nav">
  <button id="prevBtn">Previous</button>
  <span id="slideCount">Slide 1 / 6</span>
  <button id="nextBtn">Next</button>
  <div id="progressBar"></div>
</div>

<script>
const windBase64 = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU5LjI3LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8A";
const creakBase64 = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU5LjI3LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8A";
const slamBase64 = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU5LjI3LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8A";
const silenceBase64 = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU5LjI3LjEwMAAAAAAAAAAAAAAA/+NAwAAAAAAAAAAAAEluZm8AAAAPAAAAFgAACcsA";

const h5pJson = {
  "title":"Pacing – The Art of Audio Timing",
  "mainLibrary":"H5P.CoursePresentation",
  "language":"en",
  "preloadedDependencies":[
    {"machineName":"H5P.CoursePresentation","majorVersion":1,"minorVersion":24},
    {"machineName":"H5P.Audio","majorVersion":1,"minorVersion":5},
    {"machineName":"H5P.DragQuestion","majorVersion":1,"minorVersion":13},
    {"machineName":"H5P.MultiChoice","majorVersion":1,"minorVersion":15},
    {"machineName":"H5P.Text","majorVersion":1,"minorVersion":1}
  ],
  "content":{"presentation":{"slides":[
    { "elements":[{"x":5,"y":5,"width":90,"height":20,"action":{"library":"H5P.Text 1.1","params":{"text":"<h1 class='fade'>Pacing – The Art of Audio Timing</h1><p class='fade'>Timing creates mood and tension. Explore how pacing shapes stories.</p>"}}}]},
    { "elements":[
      {"x":5,"y":5,"width":90,"height":15,"action":{"library":"H5P.Text 1.1","params":{"text":"<h2 class='fade'>Building Atmosphere Through Sound</h2><p class='fade'>Layer sounds gradually to build mood.</p>"}}},
      {"x":5,"y":25,"width":40,"height":15,"action":{"library":"H5P.Audio 1.5","params":{"files":[{"path":silenceBase64}]}}},
      {"x":50,"y":25,"width":40,"height":15,"action":{"library":"H5P.Audio 1.5","params":{"files":[{"path":windBase64}]}}},
      {"x":5,"y":45,"width":40,"height":15,"action":{"library":"H5P.Audio 1.5","params":{"files":[{"path":creakBase64}]}}},
      {"x":50,"y":45,"width":40,"height":15,"action":{"library":"H5P.Audio 1.5","params":{"files":[{"path":slamBase64}]}}}
    ]},
    { "elements":[
      {"x":5,"y":5,"width":90,"height":15,"action":{"library":"H5P.Text 1.1","params":{"text":"<h2 class='fade'>Strategic Pauses</h2><p class='fade'>Compare scenes with and without pauses.</p>"}}},
      {"x":5,"y":25,"width":40,"height":15,"action":{"library":"H5P.Audio 1.5","params":{"files":[{"path":silenceBase64}]}}},
      {"x":50,"y":25,"width":40,"height":15,"action":{"library":"H5P.Audio 1.5","params":{"files":[{"path":windBase64}]}}}
    ]},
    { "elements":[
      {"x":5,"y":5,"width":90,"height":15,"action":{"library":"H5P.DragQuestion 1.13","params":{"question":"Match pacing styles to their effect:","taskDescription":"Drag the style to the mood","dropZones":[{"label":"Action"},{"label":"Suspense"},{"label":"Emotional build"}],"draggables":[{"label":"Fast dialogue","correctDropZone":[0]},{"label":"Slow, deliberate speech","correctDropZone":[1]},{"label":"Music heartbeat","correctDropZone":[2]}]}}}
    ]},
    { "elements":[
      {"x":5,"y":5,"width":90,"height":15,"action":{"library":"H5P.MultiChoice 1.15","params":{"question":"Which technique lets a scary moment 'breathe'?","answers":[{"text":"Faster dialogue","correct":false},{"text":"Louder background noise","correct":false},{"text":"Silence / pause","correct":true}],"behaviour":{"singlePoint":true}}}}
    ]},
    { "elements":[
      {"x":5,"y":5,"width":90,"height":20,"action":{"library":"H5P.Text 1.1","params":{"text":"<h2 class='fade'>Great work!</h2><p class='fade'>You’ve explored how pacing shapes audio drama. Think about timing in your own podcast.</p>"}}}
    ]}
  ]}}
};

let currentSlide = 0;
const totalSlides = h5pJson.content.presentation.slides.length;
const container = document.getElementById('h5p-container');
const slideCount = document.getElementById('slideCount');
const progressBar = document.getElementById('progressBar');

const h5pInstance = new H5PStandalone.H5P(container, {
  h5pContent: h5pJson,
  frameJs: 'https://unpkg.com/h5p-standalone@1.3.0/dist/frame.bundle.js',
  frameCss: 'https://unpkg.com/h5p-standalone@1.3.0/dist/styles/h5p.css'
});

document.getElementById('prevBtn').addEventListener('click', ()=>{ if(currentSlide>0){currentSlide--; showSlide();} });
document.getElementById('nextBtn').addEventListener('click', ()=>{ if(currentSlide<totalSlides-1){currentSlide++; showSlide();} });

function showSlide(){
  const slides = container.querySelectorAll('.h5p-slide');
  slides.forEach((s,i)=>{ 
    s.style.opacity = i===currentSlide?1:0; 
    if(i===currentSlide){
      s.querySelectorAll('.fade').forEach(el=>{ el.classList.add('visible'); });
    } else {
      s.querySelectorAll('.fade').forEach(el=>{ el.classList.remove('visible'); });
    }
  });
  slideCount.textContent = `Slide ${currentSlide+1} / ${totalSlides}`;
  progressBar.style.width = `${((currentSlide+1)/totalSlides)*100}%`;
}

h5pInstance.on('ready', function(){
  setTimeout(showSlide, 500);
});
</script>
</body>
</html>
